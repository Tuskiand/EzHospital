(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/center/baseInfo/baseInfo"],{3541:function(e,n,a){"use strict";a.d(n,"b",(function(){return o})),a.d(n,"c",(function(){return t})),a.d(n,"a",(function(){}));var o=function(){var e=this.$createElement,n=(this._self._c,this._f("getIdentityNum")(this.userCardInfo.identificationNumber)),a=this._f("getGender")(this.userCardInfo.gender),o=this._f("getDate")(this.userCardInfo.birthDate);this.$mp.data=Object.assign({},{$root:{f0:n,f1:a,f2:o}})},t=[]},"588b":function(e,n,a){},"5ce7":function(e,n,a){"use strict";(function(e,n){var o=a("47a9");a("f722");o(a("3240"));var t=o(a("d506"));e.__webpack_require_UNI_MP_PLUGIN__=a,n(t.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},d506:function(e,n,a){"use strict";a.r(n);var o=a("3541"),t=a("f3d3");for(var r in t)["default"].indexOf(r)<0&&function(e){a.d(n,e,(function(){return t[e]}))}(r);a("fd82");var s=a("828b"),i=Object(s["a"])(t["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=i.exports},dab7:function(e,n,a){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a("1576"),t=a("d617"),r=a("eade"),s={data:function(){return{showBaseInfo:!1,showCardInfo:!1,isGetCard:!1,userBaseInfo:{},userCardInfo:{},modalBaseName:"",modalCardInfo:{}}},methods:{openBeseShow:function(){this.modalBaseName=this.userBaseInfo.name,this.showBaseInfo=!0},closeBaseShow:function(){this.userBaseInfo.name=this.modalBaseName,this.showBaseInfo=!1},openCardShow:function(){this.modalCardInfo=JSON.parse(JSON.stringify(this.userCardInfo)),this.showCardInfo=!0},closeCardShow:function(){this.showCardInfo=!1,this.userCardInfo=this.modalCardInfo},updateBaseInfo:function(){var n=this,a=(0,r.inputCheck)("姓名","string",this.userBaseInfo.name);"ok"===a?(e.showLoading({title:"修改中"}),(0,o.updateBaseInfo)(e.getStorageSync("userID"),{avatarUrl:this.userBaseInfo.avatarUrl,name:this.userBaseInfo.name}).then((function(a){200===a.data.code?(e.hideLoading(),e.showToast({title:"修改成功",icon:"success"}),n.showBaseInfo=!1):(e.hideLoading(),n.userBaseInfo.name=n.modalBaseName,n.showBaseInfo=!1,(0,t.error)("更新失败"))})).catch((function(){e.hideLoading(),n.userBaseInfo.name=n.modalBaseName,n.showBaseInfo=!1,(0,t.error)("更新失败，请检查网络")}))):(0,t.error)(a)},updateCardInfo:function(){var n=this,a=(0,r.inputCheck)("姓名","string",this.userCardInfo.name),s=(0,r.inputCheck)("手机号","phone",this.userCardInfo.phone);"ok"!==a?(0,t.error)(a):"ok"!==s?(0,t.error)(s):(e.showLoading({title:"修改中"}),(0,o.updateCardInfo)(this.userCardInfo.relationId,{gender:this.userCardInfo.gender,name:this.userCardInfo.name,phone:this.userCardInfo.phone,type:this.userCardInfo.type}).then((function(a){200===a.data.code?(e.hideLoading(),n.showCardInfo=!1,e.showToast({title:"修改成功",icon:"success"})):(e.hideLoading(),n.userCardInfo=n.modalCardInfo,n.showCardInfo=!1,(0,t.error)("修改失败"))})).catch((function(){e.hideLoading(),n.userCardInfo=n.modalCardInfo,n.showCardInfo=!1,(0,t.error)("修改失败，请检查网络")})))},toAddCard:function(){e.navigateTo({url:"/pagesB/pages/center/addCard/addCard?isMyself="+!0})},getMyselfCardInfo:function(){var n=this;e.showLoading({title:"加载中"}),(0,o.getUserCardInfo)(e.getStorageSync("accountID")).then((function(a){var o=n;if(console.log(a),200===a.data.code){e.hideLoading();var t=a.data.data;0!==t.length?(t.forEach((function(n){if(0===n.type)return o.isGetCard=!0,console.log(n),o.userCardInfo=n,void e.setStorageSync("cardID",n.id)})),e.removeStorageSync("userInfo")):n.isGetCard=!1}})).catch((function(){e.hideLoading(),(0,t.error)("网络")}))}},onShow:function(){this.userBaseInfo=JSON.parse(e.getStorageSync("userInfo")),this.getMyselfCardInfo(),console.log("test")}};n.default=s}).call(this,a("df3c")["default"])},f3d3:function(e,n,a){"use strict";a.r(n);var o=a("dab7"),t=a.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(n,e,(function(){return o[e]}))}(r);n["default"]=t.a},fd82:function(e,n,a){"use strict";var o=a("588b"),t=a.n(o);t.a}},[["5ce7","common/runtime","common/vendor"]]]);