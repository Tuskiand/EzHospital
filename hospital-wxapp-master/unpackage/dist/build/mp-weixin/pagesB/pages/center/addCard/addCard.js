(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/center/addCard/addCard"],{"059e":function(e,t,n){"use strict";n.r(t);var i=n("7791"),a=n("1efd");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("607f");var o=n("828b"),d=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=d.exports},"1efd":function(e,t,n){"use strict";n.r(t);var i=n("b0bb"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},4743:function(e,t,n){},5319:function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("f722");i(n("3240"));var a=i(n("059e"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"607f":function(e,t,n){"use strict";var i=n("4743"),a=n.n(i);a.a},7791:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},a=[]},b0bb:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("eade"),a=n("1576"),r=n("d617"),o={data:function(){return{phoneArray:["+86"],phoneIndex:0,relateArray:["父母","兄弟/姐妹","伴侣","子女","同事/朋友","其他"],relateIndex:0,gender:1,form:{name:"",identify:"",phone:"",date:""},isMyself:!1,isValidate:!0}},methods:{test:function(){e.navigateBack({delta:1})},changeGender:function(t){"ok"===(0,i.inputCheck)("身份证","identify",this.form.identify)?(this.gender=(0,i.checkGender)(this.form.identify),t!==this.gender&&e.showToast({title:"请查看身份证号码是否有误",icon:"none"})):this.gender=t},inputCheck:function(t,n,a){this.isValidate=!0;var r=(0,i.inputCheck)(t,n,this.form[a]);if("ok"!==r)e.showToast({title:r,icon:"none"}),this.form[a]="";else if("identify"===n){var o=this.form[a].slice(6,14);this.form.date=(0,i.changeDateByIdentify)(o),this.gender=(0,i.checkGender)(this.form[a])}},validate:function(){for(var e in this.form)if(""===this.form[e]){(0,r.error)("请将信息填写完整"),this.isValidate=!1;break}this.isValidate&&this.addCard()},addCard:function(){var t,n=this;e.showLoading({title:"加载中"}),t=this.isMyself?0:parseInt(this.relateIndex)+1,(0,a.addCard)(e.getStorageSync("accountID"),{birthDate:this.form.date,gender:this.gender,identificationNumber:this.form.identify,name:this.form.name,phone:this.form.phone,type:t}).then((function(i){200===i.data.code&&(e.hideLoading(),e.showToast({title:"添加成功",icon:"success"}),0===t?(n.getMyselfCardInfo(),e.navigateBack({delta:1})):e.navigateBack({delta:1}))})).catch((function(){e.hideLoading(),(0,r.error)("添加失败")}))},getMyselfCardInfo:function(){(0,a.getUserCardInfo)(e.getStorageSync("accountID")).then((function(t){if(200===t.data.code){var n=t.data.data;n.length>0&&n.forEach((function(t,n){0!==t.type||e.setStorageSync("cardID",t.id)}))}})).catch((function(){}))},relateChange:function(e){this.relateIndex=e.detail.value}},onLoad:function(e){this.isMyself=e.isMyself}};t.default=o}).call(this,n("df3c")["default"])}},[["5319","common/runtime","common/vendor"]]]);