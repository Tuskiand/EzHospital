(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/pages/appointPages/doctorAppointDetail/insureAppoint/insureAppoint"],{"1a7a":function(t,e,a){},3092:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=(this._self._c,this._f("getDate")(this.visitInfo.date)),a=this._f("getTimePeriod")(this.visitInfo.timePeriod);this.$mp.data=Object.assign({},{$root:{f0:e,f1:a}})},n=[]},"3e25":function(t,e,a){"use strict";(function(t,e){var i=a("47a9");a("f722");i(a("3240"));var n=i(a("d330"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(n.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},"5db7":function(t,e,a){"use strict";(function(t){var i=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("7ca3")),c=a("1576"),o=a("d617"),d=a("0495"),s=a("83ee"),r={data:function(){var e;return e={showCardId:!1,selectId:0,isOverLimit:!1,cardList:[],iconURL:"/static/center/card/",cardID:t.getStorageSync("cardID")||"",cardName:"",selectName:""},(0,n.default)(e,"selectId",t.getStorageSync("cardID")||""),(0,n.default)(e,"visitInfo",{}),(0,n.default)(e,"clinicName",""),(0,n.default)(e,"hospital",""),e},methods:{showModal:function(){this.showCardId=!0},closeShowModal:function(){this.showCardId=!1,this.selectId=this.cardID,this.selectName=this.cardName},getIsCardOverIimit:function(){t.showLoading({title:"加载中"}),(0,c.getIsCardOverIimit)(t.getStorageSync("accountID")).then((function(e){200===e.data.code&&(t.hideLoading(),!1===e.data.data?t.navigateTo({url:"/pagesB/pages/center/addCard/addCard"}):t.showModal({content:"已超过绑定就诊卡限制",showCancel:!1,success:function(t){t.cancel&&console.log("用户点击取消")}}))})).catch((function(){t.hideLoading(),(0,o.error)("网络")}))},getUserCardInfo:function(){var e=this;this.cardList=[],(0,c.getUserCardInfo)(t.getStorageSync("accountID")).then((function(t){if(200===t.data.code){var a=t.data.data,i=e;a.length>0&&(e.cardList=a,e.cardList.forEach((function(t,e){t.id===i.cardID&&(i.selectName=t.name,i.cardName=t.name)})))}})).catch((function(){(0,o.error)("网络")}))},selectCardID:function(t,e){this.selectId=t,this.selectName=e},insureCardId:function(){this.cardID=this.selectId,this.cardName=this.selectName,this.showCardId=!1},getClinic:function(){var e=this;t.showLoading({title:"加载中"}),(0,d.getClinicById)(this.visitInfo.clinicId).then((function(a){200===a.data.code&&(t.hideLoading(),e.clinicName=a.data.data.address)})).catch((function(){t.hideLoading(),(0,o.error)("获取诊室信息失败")}))},insureAppoint:function(){var e=this;t.showModal({title:"挂号",content:"确认支付10块挂号吗",success:function(a){a.confirm&&(t.showLoading({title:"挂号中"}),(0,s.valifyBlacklist)(e.cardID).then((function(a){a.data.data?(t.hideLoading(),t.showToast({title:"该卡号进入爽约黑名单，暂时不能挂号",icon:"none"})):(0,s.addAppoint)({accountId:t.getStorageSync("accountID"),cardId:e.cardID,planId:e.visitInfo.planId,timePeriod:e.visitInfo.timePeriod}).then((function(e){t.hideLoading(),t.showToast({title:"挂号成功",icon:"success"}),setTimeout((function(){t.switchTab({url:"/pages/center/center"})}),2e3)})).catch((function(){t.hideLoading(),t.showToast({title:"挂号失败",icon:"none"})}))})))}})}},onShow:function(){this.visitInfo=JSON.parse(t.getStorageSync("visitInfo")),console.log(JSON.parse(t.getStorageSync("hospital"))),this.hospital=JSON.parse(t.getStorageSync("hospital")).name,this.getUserCardInfo(),this.getClinic()}};e.default=r}).call(this,a("df3c")["default"])},"830b":function(t,e,a){"use strict";a.r(e);var i=a("5db7"),n=a.n(i);for(var c in i)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(c);e["default"]=n.a},bc95:function(t,e,a){"use strict";var i=a("1a7a"),n=a.n(i);n.a},d330:function(t,e,a){"use strict";a.r(e);var i=a("3092"),n=a("830b");for(var c in n)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(c);a("bc95");var o=a("828b"),d=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=d.exports}},[["3e25","common/runtime","common/vendor"]]]);